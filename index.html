<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apprendre par C≈ìur - M√©morisation Active</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css"> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Apprendre par C≈ìur üß†</h1>
        <p class="text-center text-muted">Entrez votre texte, choisissez votre temps et testez votre m√©moire avec des exercices √† trous.</p>

        <div id="input-section">
            <form id="text-form">
                <div class="mb-3">
                    <label for="full-text" class="form-label">Texte complet √† m√©moriser :</label>
                    <textarea class="form-control" id="full-text" rows="20" required placeholder="Collez ici votre long texte..."></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100">Analyser et Configurer</button>
            </form>
        </div>

        <div class="modal fade" id="time-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Temps de Lecture par Paragraphe</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p>Le texte a √©t√© divis√© en **<span id="para-count-in-modal"></span>** paragraphes.</p>
                        <p>Choisissez le temps de lecture pour chaque paragraphe (en secondes) :</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="read-time" id="time-180" value="180">
                            <label class="form-check-label" for="time-180">3 minutes (180s)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="read-time" id="time-300" value="300" checked>
                            <label class="form-check-label" for="time-300">5 minutes (300s)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="read-time" id="time-480" value="480">
                            <label class="form-check-label" for="time-480">8 minutes (480s)</label>
                        </div>
                        <div class="mt-3">
                            <label for="custom-time" class="form-label">Ou temps personnalis√© (en secondes) :</label>
                            <input type="number" class="form-control" id="custom-time" min="60" max="1800" value="300">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="confirm-time">Confirmer et Commencer</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="quiz-level-modal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Niveau de Difficult√© du Quiz</h5>
                    </div>
                    <div class="modal-body">
                        <p>Choisissez la densit√© des trous pour le test du Paragraphe <span id="current-para-number"></span> :</p>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="quiz-level" id="level-easy" value="0.35" checked>
                            <label class="form-check-label" for="level-easy">Facile (‚âà35% de mots cach√©s)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="quiz-level" id="level-medium" value="0.60">
                            <label class="form-check-label" for="level-medium">Moyen (‚âà60% de mots cach√©s)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="quiz-level" id="level-expert" value="0.90">
                            <label class="form-check-label" for="level-expert">Expert (‚âà90% de mots cach√©s)</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" id="start-quiz-with-level">Lancer le Texte √† Trous</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="progress-section" class="hidden">
            <div class="progress mb-3">
                <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%"></div>
            </div>
            <p id="progress-text" class="text-center">Paragraphe 1/<span id="total-paras"></span></p>
        </div>

        <div id="reading-section" class="hidden card p-4">
            <h2 id="reading-title">Lecture du Paragraphe 1</h2>
            <div class="timer-controls d-flex justify-content-center align-items-center mb-3">
                <div id="timer" class="d-inline me-3">05:00</div>
                <button id="hide-timer" class="btn btn-sm btn-outline-secondary me-2">Cacher</button>
                <button id="pause-timer" class="btn btn-sm btn-outline-secondary me-2">Pause</button>
                <button id="start-quiz-btn" class="btn btn-sm btn-primary">Pratiquer le Quiz Directement</button>
            </div>
            <div id="reading-text" class="paragraph-text bg-light p-3 rounded"></div>
        </div>

        <div id="quiz-section" class="hidden card p-4">
            <h2 id="quiz-title">Quiz : Paragraphe <span id="quiz-para-num"></span></h2>
            <div class="timer-controls-quiz d-flex justify-content-center align-items-center mb-3">
                <div id="timer-quiz" class="d-inline me-3">05:00</div>
                <button id="pause-timer-quiz" class="btn btn-sm btn-outline-secondary me-2">Pause</button>
            </div>
            <p class="text-muted">Remplissez les trous manquants (un mot par trou) :</p>
            <div id="quiz-cloze-container" class="cloze-text bg-light p-3 rounded mb-3"></div>
            <div id="quiz-cloze-feedback" class="cloze-warning hidden"></div>
            <div class="d-flex justify-content-between">
                <button id="show-answers-btn-quiz" class="btn btn-sm btn-info text-white">Voir les R√©ponses</button>
                <button id="submit-quiz" class="btn btn-success">V√©rifier le Quiz</button>
            </div>
        </div>

        <div id="results-section" class="hidden card p-4">
            <h2>R√©sultats : Paragraphe <span id="result-para"></span></h2>
            <div id="score-display" class="text-center mb-3">
                <h3 id="score-percent"></h3>
                <p id="score-details"></p>
            </div>
            <div class="d-flex gap-2 justify-content-center">
                <button id="redo-btn" class="btn btn-warning">Refaire (nouvelle lecture)</button>
                <button id="continue-btn" class="btn btn-success">Continuer</button>
            </div>
        </div>

        <div id="final-section" class="hidden">
            <div class="card p-4">
                <h2>Test Final : Texte √† Trous (Tout le Texte)</h2>
                <p class="text-muted">Remplissez les trous manquants (densit√© moyenne) :</p>
                <div id="final-cloze-container" class="cloze-text bg-light p-3 rounded mb-3"></div>
                <div id="final-cloze-feedback" class="cloze-warning hidden"></div>
                <div class="d-flex justify-content-between">
                    <button id="show-answers-btn-final" class="btn btn-sm btn-info text-white">Voir les R√©ponses</button>
                    <button id="submit-final" class="btn btn-success">V√©rifier le Test Final</button>
                </div>
            </div>
        </div>

        <div id="final-results" class="hidden mt-4">
            <div class="card p-4">
                <h2>R√©sultats Finaux üéâ</h2>
                <div id="final-score" class="text-center mb-4">
                    <h3>Score Final au Test √† Trous : <span id="final-percent"></span></h3>
                </div>
                <h4>Scores d'entra√Ænement par Paragraphe :</h4>
                <canvas id="scores-chart" width="400" height="200"></canvas>
                <div class="mt-3">
                    <button id="restart-btn" class="btn btn-primary">Recommencer</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
